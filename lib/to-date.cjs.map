{"version":3,"file":"to-date.cjs","sources":["../src/index.ts"],"sourcesContent":["// const isLikelyMilliseconds = (n: number) => log10(n) < 13;\nconst isLikelyMicroseconds = (n: number) => Math.log10(n) >= 13;\n\nconst isDate = (object: unknown): object is Date =>\n  object instanceof Date && !isNaN(object.getTime());\n\nenum ToDateNumberUnit {\n  BESTGUESS,\n  MILLISCONDS,\n  MICROSECONDS,\n}\n\nconst toDate = (\n  value: Date | string | number | null | undefined,\n  numberUnit = ToDateNumberUnit.BESTGUESS\n): Date | undefined => {\n  if (isDate(value)) {\n    return value;\n  } else if (typeof value === \"string\") {\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#date_time_string_format\n    const _d = new Date(value);\n    return isDate(_d) ? _d : undefined;\n  } else if (typeof value === \"number\") {\n    let baseValue: number;\n\n    switch (numberUnit) {\n      case ToDateNumberUnit.BESTGUESS:\n        baseValue = isLikelyMicroseconds(value) ? value / 1000 : value;\n      case ToDateNumberUnit.MILLISCONDS:\n        baseValue = value;\n      case ToDateNumberUnit.MICROSECONDS:\n        baseValue = value / 1000;\n    }\n\n    return new Date(baseValue);\n  } else {\n    return undefined;\n  }\n};\n\nexport { toDate, isDate, ToDateNumberUnit };\n"],"names":["ToDateNumberUnit","isDate","object","Date","isNaN","getTime","value","numberUnit","BESTGUESS","_d","undefined","baseValue","Math","log10","MILLISCONDS","MICROSECONDS"],"mappings":"AACA,IAKKA,EAHCC,EAAS,SAACC,UACdA,aAAkBC,OAASC,MAAMF,EAAOG,UAAU,EAE/CL,QAALA,sBAAA,GAAKA,EAAAA,QAAgBA,mBAAhBA,yBAIJ,CAAA,IAHCA,EAAA,UAAA,GAAA,YACAA,EAAAA,EAAA,YAAA,GAAA,cACAA,EAAAA,EAAA,aAAA,GAAA,+CAGa,SACbM,EACAC,GAEA,QAFAA,IAAAA,IAAAA,EAAaP,QAAAA,iBAAiBQ,WAE1BP,EAAOK,GACT,OAAOA,EACE,GAAiB,iBAAVA,EAAoB,CAEpC,IAAMG,EAAK,IAAIN,KAAKG,GACpB,OAAOL,EAAOQ,GAAMA,OAAKC,CAC1B,CAAM,GAAqB,iBAAVJ,EAAoB,CACpC,IAAIK,EAEJ,OAAQJ,GACN,KAAKP,QAAAA,iBAAiBQ,UACpBG,EA1BoCC,KAAKC,MA0BRP,IA1BoB,GA0BXA,EAAQ,IAAOA,EAC3D,KAAKN,QAAgBA,iBAACc,YACpBH,EAAYL,EACd,KAAKN,QAAgBA,iBAACe,aACpBJ,EAAYL,EAAQ,IAGxB,OAAW,IAAAH,KAAKQ,EACjB,CAGH"}